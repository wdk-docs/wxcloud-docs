数据库 API
============

.. js:function:: wx.cloud.database([{[env]}])

   获取数据库的引用

   :param string env: 环境 ID
   :return: Database
   :示例:

    .. code-block:: js

      const db = wx.cloud.database()

.. js:function:: wx.cloud.database.collection(name: string)

   获取集合的引用

   :param string name: 指定需引用的集合名称
   :return: Collection
   :示例:

    .. code-block:: js

      const collection = db.collection('todos')


小程序·云开发提供了丰富的数据库操作 API，此处是数据库小程序端的 API 参考文档。

数据库 API 都是懒执行的，这意味着只有真实需要网络请求的 API 调用才会发起网络请求，
其余如获取数据库、集合、记录的引用、在集合上构造查询条件等都是不会触发网络请求的。

触发网络请求API
------------------------------------------

+--------+----------------------------+
|  API   |            说明            |
+========+============================+
| get    | 获取集合 / 记录数据        |
+--------+----------------------------+
| add    | 在集合上新增记录           |
+--------+----------------------------+
| update | 更新集合 / 记录数据        |
+--------+----------------------------+
| set    | 替换更新一个记录           |
+--------+----------------------------+
| remove | 删除记录                   |
+--------+----------------------------+
| count  | 统计查询语句对应的记录条数 |
+--------+----------------------------+

获取引用API
------------------------------------------

+------------+------------------------------------------+
|    API     |                   说明                   |
+============+==========================================+
| database   | 获取数据库引用，返回 Database 对象       |
+------------+------------------------------------------+
| collection | 获取集合引用，返回 Collection 对象       |
+------------+------------------------------------------+
| doc        | 获取对一个记录的引用，返回 Document 对象 |
+------------+------------------------------------------+

数据库 (Database) 字段：
------------------------------------------

+------------+----------------------------------------+
|    字段    |                  说明                  |
+============+========================================+
| command    | 获取数据库查询及更新指令，返回 Command |
+------------+----------------------------------------+
| serverDate | 构造服务端时间                         |
+------------+----------------------------------------+
| Geo        | 获取地理位置操作对象，返回 Geo 对象    |
+------------+----------------------------------------+

集合 (Collection) API：
------------------------------------------

+-----------------------------------------------------------+----------------------------------------------------------------------+
|                            API                            |                                 说明                                 |
+===========================================================+======================================================================+
| :js:func:`doc <wx.cloud.database.collection.doc>`         | 获取对一个记录的引用，返回 Document 对象                             |
+-----------------------------------------------------------+----------------------------------------------------------------------+
| :js:func:`add <wx.cloud.database.collection.add>`         | 在集合上新增记录                                                     |
+-----------------------------------------------------------+----------------------------------------------------------------------+
| :js:func:`where <wx.cloud.database.collection.where>`     | 构建一个在当前集合上的查询条件，返回 Query，查询条件中可使用查询指令 |
+-----------------------------------------------------------+----------------------------------------------------------------------+
| :js:func:`orderBy <wx.cloud.database.collection.orderBy>` | 指定查询数据的排序方式                                               |
+-----------------------------------------------------------+----------------------------------------------------------------------+
| :js:func:`limit <wx.cloud.database.collection.limit>`     | 指定返回数据的数量上限                                               |
+-----------------------------------------------------------+----------------------------------------------------------------------+
| :js:func:`skip <wx.cloud.database.collection.skip>`       | 指定查询时从命中的记录列表中的第几项之后开始返回                     |
+-----------------------------------------------------------+----------------------------------------------------------------------+
| :js:func:`field <wx.cloud.database.collection.field>`     | 指定返回结果中每条记录应包含的字段                                   |
+-----------------------------------------------------------+----------------------------------------------------------------------+

记录 (Document) API：
------------------------------------------

+--------+--------------------------------+
|  API   |              说明              |
+========+================================+
| get    | 获取记录数据                   |
+--------+--------------------------------+
| update | 局部更新数据                   |
+--------+--------------------------------+
| set    | 替换更新记录                   |
+--------+--------------------------------+
| remove | 删除记录                       |
+--------+--------------------------------+
| field  | 指定返回结果中记录应包含的字段 |
+--------+--------------------------------+

Command (db.command)指令：
------------------------------------------

+-----+--------------------------------------+
| API |                 说明                 |
+=====+======================================+
| eq  | 字段是否等于指定值                   |
+-----+--------------------------------------+
| neq | 字段是否不等于指定值                 |
+-----+--------------------------------------+
| lt  | 字段是否小于指定值                   |
+-----+--------------------------------------+
| lte | 字段是否小于或等于指定值             |
+-----+--------------------------------------+
| gt  | 字段是否大于指定值                   |
+-----+--------------------------------------+
| gte | 字段是否大于或等于指定值             |
+-----+--------------------------------------+
| in  | 字段值是否在指定数组中               |
+-----+--------------------------------------+
| nin | 字段值是否不在指定数组中             |
+-----+--------------------------------------+
| and | 条件与，表示需同时满足另一个条件     |
+-----+--------------------------------------+
| or  | 条件或，表示如果满足另一个条件也匹配 |
+-----+--------------------------------------+

Command (db.command) 指令：
------------------------------------------

+---------+----------------------------------------+
|   API   |                  说明                  |
+=========+========================================+
| set     | 设置字段为指定值                       |
+---------+----------------------------------------+
| remove  | 删除字段                               |
+---------+----------------------------------------+
| inc     | 原子自增字段值                         |
+---------+----------------------------------------+
| mul     | 原子自乘字段值                         |
+---------+----------------------------------------+
| push    | 如字段值为数组，往数组尾部增加指定值   |
+---------+----------------------------------------+
| pop     | 如字段值为数组，从数组尾部删除一个元素 |
+---------+----------------------------------------+
| shift   | 如字段值为数组，从数组头部删除一个元素 |
+---------+----------------------------------------+
| unshift | 如字段值为数组，往数组头部增加指定值   |
+---------+----------------------------------------+
